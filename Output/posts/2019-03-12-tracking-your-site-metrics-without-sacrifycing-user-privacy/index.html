<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous"/><link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css"/><link rel="stylesheet" href="Pure/styles.css"/><link rel="stylesheet" href="all.css"/></head><body><div id="layout" class="pure-g"><div class="sidebar pure-u-1 pure-u-md-1-4"><div class="header"><div id="layout" class="pure-g"><div class="pure-u-md-1-1 pure-u-3-4"><h1 class="brand-title">Bitomule's learning shack</h1><h3 class="brand-tagline">My thoughts about iOS, technology or any other thing that comes to my mind.</h3></div></div><div id="layout" class="pure-g"><div class="pure-u-md-1-1"><a href="mailto:bitomule+blog@gmail.com"><i class="fas fa-envelope-open-text l-box social-icon"></i><a class="social-media" href="mailto:bitomule+blog@gmail.com">Email</a></a></div><div class="pure-u-md-1-1"><a href="https://www.linkedin.com/in/davidcolladosela/"><i class="fab fa-linkedin l-box social-icon"></i><a class="social-media" href="https://www.linkedin.com/in/davidcolladosela/">LinkedIn</a></a></div><div class="pure-u-md-1-1"><a href="https://github.com/bitomule"><i class="fab fa-github-square l-box social-icon"></i><a class="social-media" href="https://github.com/bitomule">GitHub</a></a></div><div class="pure-u-md-1-1"><a href="https://twitter.com/Bitomule"><i class="fab fa-twitter-square l-box social-icon"></i><a class="social-media" href="https://twitter.com/Bitomule">Twitter</a></a></div></div></div></div><div class="content pure-u-1 pure-u-md-3-5 pure-u-xl-6-10"><h2 class="post-title"><a href="/posts/2019-03-12-tracking-your-site-metrics-without-sacrifycing-user-privacy">Tracking your site metrics without sacrificing​ user privacy</a></h2><p class="post-meta">12 de marzo de 2019</p><div class="post-tags"><a class="post-category post-category-web" href="/tags/web">Web</a></div><div class="post-description"><div><h1>Tracking your site metrics without sacrificing​ user privacy</h1><p>After having my blog up and running there was one piece missing, I didn't have any kind of tracking so it was impossible to know if people were reading me and what were they reading.</p><p>That's how I started to look for a solution that matched the next requirements:</p><ul><li>Respect users privacy</li><li>Self-hosted</li><li>Free</li><li>Easy to run with my current docker setup</li></ul><p>Looks impossible, doesn't it?</p><p>That's what I thought after some research. I saw lot's of options, the most commonly used was Google Analytics but that was far from what I wanted. When I was about to lose hope I found <a href="https://usefathom.com">Fathom</a> and suddenly all the checks were marked:</p><ul><li><strong>Respects user privacy?</strong> Yep, that's one of their core values. (You can read more about this <a href="https://usefathom.com/data/">here</a>)</li><li><strong>Self-hosted?</strong> Yep, It's open source and you can host it yourself.</li><li><strong>Free?</strong> Hell yes</li><li><strong>Easy to run with my current docker setup?</strong> Well, they have an official docker image, so it should be</li></ul><blockquote><p>Spoiler: Using their official docker image wasn't easy.</p></blockquote><p>I went to my beautiful <a href="https://blog.bitomule.com/using-portainer-to-manage-container-station/">portainer</a> client ready to install Fathom from the official image and after a few seconds, it was running. It was running but how do I configure it? Is there any shared volume I can use? Nothing... I couldn't make the official image work. <img src="/content/images/2019/03/200.gif"/> I went back to docker hub and I found another image, not official in this case but it had the missing part I needed: a volume.</p><p>This image was <strong><a href="https://hub.docker.com/r/geerlingguy/fathom">geerlingguy/fathom</a></strong> and again, in a few seconds, I had it working in portainer. I created a new shared volume (<a href="https://blog.bitomule.com/using-portainer-to-manage-container-station/">check my post about portainer to read about that</a>) and there started those tricky parts you spend hours searching on google because you don't know how to fix. But don't worry, I have all of them ready for you:</p><ul><li>You have to create and .env file in your shared volume with the content</li></ul><p>FATHOM<em>SERVER</em>ADDR=9000 FATHOM<em>GZIP=true FATHOM</em>DEBUG=true FATHOM<em>DATABASE</em>DRIVER="sqlite3" FATHOM<em>DATABASE</em>NAME="fathom.db" FATHOM_SECRET="create-a-random-key-and-paste-it-here"<br><br>- In order to protect your Fathom with user and password you should run in your docker terminal (connecting with portainer is really easy) :</p><p>fathom user add <a href="--email="youremail@blabla.com">--email="youremail@blabla.com</a>" --password="strong-password"</p><ul><li>Map the port to want to use to the container port 9000</li><li>Reboot your container</li></ul><p>Once you have done this things your fathom instance should be up, running and accessible. You'll need the service to be accessible from the outside, I recommend using <a href="https://blog.bitomule.com/running-a-website-from-your-qnap-nas/">Caddy</a> so you get the proxy and the SSL for free.</p><p>The last part is adding the code snippet Fathom requires. You'll find it on your Fathom configuration (from the web UI).</p><p>Once you have set up the snipper you'll start receiving metrics on your dashboard free and without compromising your users' privacy.</p></div></div></div><div class="footer pure-u-1"><div class="pure-u-1">© 2020 Bitomule's learning shack</div><div class="pure-u-1">Generated using <a href="https://github.com/johnsundell/publish">Publish</a>. Written in Swift</div><div class="pure-u-1"><a href="/feed.rss">RSS feed</a></div></div></div></body></html>